<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cricket Scoring App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f4f4f4;
    }
    h1, h2 {
      color: #333;
    }
    input, button, select {
      padding: 10px;
      margin: 5px;
    }
    .score-section, .controls {
      margin-bottom: 20px;
    }
    .bowler-stats, .history {
      background: #fff;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <h1>Cricket Scoring App</h1>

  <div>
    <label>Team Name: <input type="text" id="teamName" /></label>
    <label>Batsman 1: <input type="text" id="batsman1" /></label>
    <label>Batsman 2: <input type="text" id="batsman2" /></label>
    <label>Bowler: <input type="text" id="bowlerName" /></label>
    <button onclick="startInnings()">Start Innings</button>
  </div>

  <div class="score-section">
    <h2 id="scoreDisplay">Score: 0/0</h2>
    <h3 id="batsmenDisplay">Batsmen: </h3>
    <h3 id="bowlerDisplay">Current Bowler: </h3>
  </div>

  <div class="controls">
    <button onclick="addRun(0)">0</button>
    <button onclick="addRun(1)">1</button>
    <button onclick="addRun(2)">2</button>
    <button onclick="addRun(3)">3</button>
    <button onclick="addRun(4)">4</button>
    <button onclick="addRun(6)">6</button>
    <button onclick="addExtra('wide')">Wide</button>
    <button onclick="addExtra('noBall')">No Ball</button>
    <button onclick="addExtra('bye')">Bye</button>
    <button onclick="addExtra('legBye')">Leg Bye</button>
    <button onclick="undoLast()">Undo</button>
  </div>

  <div class="bowler-stats">
    <h3>Bowler Stats</h3>
    <div id="bowlerStats"></div>
  </div>

  <div class="history">
    <h3>History</h3>
    <ul id="historyList"></ul>
  </div>

  <script>
    let score = 0, wickets = 0, balls = 0;
    let currentBatsmen = [], strikerIndex = 0, team = "";
    let history = [], bowler = "", bowlerStats = {}, overBalls = 0;

    function startInnings() {
      team = document.getElementById('teamName').value;
      currentBatsmen = [
        document.getElementById('batsman1').value,
        document.getElementById('batsman2').value
      ];
      bowler = document.getElementById('bowlerName').value;
      if (!bowlerStats[bowler]) bowlerStats[bowler] = { runs: 0, balls: 0 };
      updateDisplay();
    }

    function addRun(run) {
      score += run;
      balls++;
      overBalls++;
      bowlerStats[bowler].runs += run;
      bowlerStats[bowler].balls++;
      if (run % 2 === 1) strikerIndex = 1 - strikerIndex;
      history.push({ type: 'run', run, strikerIndex });
      if (overBalls === 6) {
        overBalls = 0;
        bowler = prompt("Enter new bowler:");
        if (!bowlerStats[bowler]) bowlerStats[bowler] = { runs: 0, balls: 0 };
      }
      updateDisplay();
    }

    function addExtra(type) {
      let run = parseInt(prompt(`Enter runs for ${type}:`, "1")) || 1;
      score += run;
      if (type === 'noBall') {
        bowlerStats[bowler].runs += run;
        history.push({ type, run });
      } else {
        // No ball/bye/leg bye doesn't count as legal delivery
        history.push({ type, run });
      }
      updateDisplay();
    }

    function undoLast() {
      const last = history.pop();
      if (!last) return;
      if (last.type === 'run') {
        score -= last.run;
        balls--;
        overBalls--;
        bowlerStats[bowler].runs -= last.run;
        bowlerStats[bowler].balls--;
        if (last.run % 2 === 1) strikerIndex = 1 - strikerIndex;
      } else {
        score -= last.run;
        if (last.type === 'noBall') {
          bowlerStats[bowler].runs -= last.run;
        }
      }
      updateDisplay();
    }

    function updateDisplay() {
      document.getElementById('scoreDisplay').textContent = `${team} Score: ${score}/${wickets}`;
      document.getElementById('batsmenDisplay').textContent = `Striker: ${currentBatsmen[strikerIndex]} | Non-striker: ${currentBatsmen[1 - strikerIndex]}`;
      document.getElementById('bowlerDisplay').textContent = `Current Bowler: ${bowler}`;
      document.getElementById('historyList').innerHTML = history.map(h => `<li>${JSON.stringify(h)}</li>`).join('');
      document.getElementById('bowlerStats').innerHTML = Object.entries(bowlerStats).map(([name, stat]) => `
        <p><strong>${name}</strong>: ${stat.runs} runs, ${stat.balls} balls</p>
      `).join('');
    }
  </script>
</body>
</html>
